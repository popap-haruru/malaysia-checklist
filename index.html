<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ãƒãƒ¬ãƒ¼ã‚·ã‚¢æ—…è¡Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 16px;
    }
    h1 {
      font-size: 20px;
      margin-bottom: 8px;
    }
    .user-box {
      margin-bottom: 16px;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      box-sizing: border-box;
    }
    .section {
      background: #fff;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 16px;
    }
    label {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-size: 16px;
    }
    input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.2);
    }
    .note {
      font-size: 12px;
      color: #666;
    }
    button {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #007aff;
      color: #fff;
    }
  </style>
</head>
<body>

<h1>ğŸ‡²ğŸ‡¾ ãƒãƒ¬ãƒ¼ã‚·ã‚¢æ—…è¡Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h1>

<div class="user-box">
  <input id="username" type="text" placeholder="ã‚ãªãŸã®åå‰ï¼ˆä¾‹ï¼šå±±ç”°ï¼‰" />
  <div class="note">â€»åå‰ã”ã¨ã«ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ãŒä¿å­˜ã•ã‚Œã¾ã™</div>
</div>

<div class="section">
  <h2>âœˆï¸ å‡ºç™ºå‰</h2>
  <label><input type="checkbox" data-id="passport"> ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ</label>
  <label><input type="checkbox" data-id="flight"> èˆªç©ºåˆ¸</label>
  <label><input type="checkbox" data-id="hotel"> ãƒ›ãƒ†ãƒ«äºˆç´„</label>
</div>

<div class="section">
  <h2>ğŸ§³ æŒã¡ç‰©</h2>
  <label><input type="checkbox" data-id="sim"> SIM / eSIM</label>
  <label><input type="checkbox" data-id="cash"> ç¾é‡‘ãƒ»ã‚¯ãƒ¬ã‚«</label>
  <label><input type="checkbox" data-id="insurance"> æµ·å¤–æ—…è¡Œä¿é™º</label>
</div>

<button id="reset">ã“ã®äººã®ãƒã‚§ãƒƒã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆ</button>

<script>
  const usernameInput = document.getElementById('username');
  const checkboxes = document.querySelectorAll('input[type="checkbox"]');
  const resetBtn = document.getElementById('reset');

  function storageKey(name) {
    return 'checklist_malaysia_' + name;
  }

  function loadState(name) {
    const data = JSON.parse(localStorage.getItem(storageKey(name)) || '{}');
    checkboxes.forEach(cb => {
      cb.checked = !!data[cb.dataset.id];
    });
  }

  function saveState(name) {
    const data = {};
    checkboxes.forEach(cb => {
      data[cb.dataset.id] = cb.checked;
    });
    localStorage.setItem(storageKey(name), JSON.stringify(data));
  }

  usernameInput.addEventListener('change', () => {
    if (usernameInput.value.trim()) {
      loadState(usernameInput.value.trim());
    }
  });

  checkboxes.forEach(cb => {
    cb.addEventListener('change', () => {
      const name = usernameInput.value.trim();
      if (!name) {
        alert('å…ˆã«åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        cb.checked = false;
        return;
      }
      saveState(name);
    });
  });

  resetBtn.addEventListener('click', () => {
    const name = usernameInput.value.trim();
    if (!name) return;
    if (confirm('ã“ã®äººã®ãƒã‚§ãƒƒã‚¯ã‚’å…¨ã¦ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
      localStorage.removeItem(storageKey(name));
      loadState(name);
    }
  });
</script>

</body>
</html>
